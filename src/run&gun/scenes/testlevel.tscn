[gd_scene load_steps=31 format=4 uid="uid://jqfap7dyroc1"]

[ext_resource type="PackedScene" uid="uid://dn40clxkjbilw" path="res://scenes/player.tscn" id="1_0bmj5"]
[ext_resource type="FontFile" uid="uid://cqp5o2vpb07yg" path="res://fonts/prstartk.ttf" id="1_07atg"]
[ext_resource type="Script" path="res://scenes/GameMan.gd" id="1_j25gr"]
[ext_resource type="PackedScene" uid="uid://bix47by45g66p" path="res://scenes/shaker.tscn" id="1_mn4yh"]
[ext_resource type="Texture2D" uid="uid://c36nm23efurpk" path="res://sprites/cross.png" id="2_068ga"]
[ext_resource type="Texture2D" uid="uid://cx1jkq4d71ivy" path="res://sprites/life_bar1.png" id="2_jfnjr"]
[ext_resource type="Texture2D" uid="uid://cc8vxc23o2bnc" path="res://sprites/life_bar2.png" id="2_tgxgj"]
[ext_resource type="Texture2D" uid="uid://b2msq5h1u0hv6" path="res://sprites/terrain/floor_dragon1-sheet.png" id="2_wm23w"]
[ext_resource type="Texture2D" uid="uid://lxy70nqdurc6" path="res://sprites/xp_bar2.png" id="3_bjxuw"]
[ext_resource type="Texture2D" uid="uid://jccbcjqyinx7" path="res://sprites/xp_bar1.png" id="3_dem6r"]
[ext_resource type="Shader" path="res://scenes/FX.gdshader" id="4_h4423"]
[ext_resource type="PackedScene" uid="uid://bxdn47ix4ytgk" path="res://scenes/xp_item.tscn" id="5_iwmxb"]
[ext_resource type="Texture2D" uid="uid://dk2hew6lc34gi" path="res://sprites/cross2.png" id="8_6g328"]
[ext_resource type="Script" path="res://scenes/camera_2d.gd" id="10_d3dg4"]
[ext_resource type="Shader" path="res://scenes/fuego.gdshader" id="12_ua2w1"]
[ext_resource type="PackedScene" uid="uid://dpqm0lwwnu1ur" path="res://scenes/spawner_activator.tscn" id="14_5dohi"]

[sub_resource type="Animation" id="Animation_d1fuo"]
resource_name = "new_animation"
length = 6.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cross2:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2.2, 4.66667, 5.46667, 6.5),
"transitions": PackedFloat32Array(1, 1, 19.6983, 1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(5, 5), Vector2(150, 150), Vector2(150, 150), Vector2(2500, 2500)]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(6.5),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"delete_todo"
}]
}

[sub_resource type="Animation" id="Animation_w86w1"]
length = 5.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cross2:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_jglkn"]
_data = {
"RESET": SubResource("Animation_w86w1"),
"new_animation": SubResource("Animation_d1fuo")
}

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_kitpu"]
texture = ExtResource("2_wm23w")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
3:0/0 = 0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
4:0/0 = 0
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
5:0/0 = 0
5:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
6:0/0 = 0
6:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
7:0/0 = 0
7:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
8:0/0 = 0
8:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
9:0/0 = 0
9:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
10:0/0 = 0
10:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
11:0/0 = 0
11:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
12:0/0 = 0
12:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
13:0/0 = 0
13:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
14:0/0 = 0
14:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)

[sub_resource type="TileSet" id="TileSet_gxlc0"]
tile_size = Vector2i(32, 32)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_kitpu")

[sub_resource type="Shader" id="Shader_lccs6"]
code = "shader_type canvas_item;
uniform float yoffset = 0.5;
uniform float animation_speed = 0.5;
uniform vec4 flame_color : source_color = vec4(1.0);
uniform sampler2D noise_texture : hint_default_black, repeat_enable;

void fragment() {
	vec2 uv = vec2(UV.x, UV.y + TIME * animation_speed);
	vec4 noise_color = texture(noise_texture, uv);
	vec4 final_color = noise_color;
	final_color.rgb += vec3(UV.y - yoffset);
	final_color.rgb = step(final_color.rgb, vec3(0.5));
	final_color.rgb = vec3(1.0) - final_color.rgb;
	final_color.a = final_color.r;
	final_color.rgb = flame_color.rgb;
	COLOR = final_color;
}"

[sub_resource type="FastNoiseLite" id="FastNoiseLite_rb3i5"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_cny51"]
width = 200
height = 200
seamless = true
noise = SubResource("FastNoiseLite_rb3i5")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_qk5nd"]
resource_local_to_scene = true
shader = SubResource("Shader_lccs6")
shader_parameter/yoffset = 0.5
shader_parameter/animation_speed = 0.1
shader_parameter/flame_color = Color(0.255413, 0.137416, 0.22257, 1)
shader_parameter/noise_texture = SubResource("NoiseTexture2D_cny51")

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_mbes7"]
width = 950
height = 950
seamless = true
noise = SubResource("FastNoiseLite_rb3i5")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_257w8"]
resource_local_to_scene = true
shader = ExtResource("12_ua2w1")
shader_parameter/yoffset = 0.5
shader_parameter/animation_speed = 0.1
shader_parameter/flame_color = Color(0.160784, 0.0784314, 0.137255, 1)
shader_parameter/noise_texture = SubResource("NoiseTexture2D_mbes7")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ethui"]
size = Vector2(85, 685)

[sub_resource type="Environment" id="Environment_em42y"]
background_mode = 3
glow_enabled = true
glow_intensity = 0.01
glow_strength = 1.63
glow_blend_mode = 1
glow_hdr_threshold = 0.0
glow_hdr_scale = 2.03

[sub_resource type="ShaderMaterial" id="ShaderMaterial_p6773"]
shader = ExtResource("4_h4423")
shader_parameter/amount = 0.2

[node name="Level" type="Node2D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]
script = ExtResource("1_j25gr")

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer"]
libraries = {
"": SubResource("AnimationLibrary_jglkn")
}
autoplay = "new_animation"

[node name="Cross2" type="Sprite2D" parent="CanvasLayer"]
position = Vector2(576, 324)
texture = ExtResource("8_6g328")

[node name="Cross" type="Sprite2D" parent="CanvasLayer/Cross2"]
position = Vector2(0, -2)
scale = Vector2(0.025, 0.025)
texture = ExtResource("2_068ga")

[node name="life_bar_in" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(8, 22)
scale = Vector2(0.1, 1)
texture = ExtResource("2_tgxgj")
offset = Vector2(72, 0)

[node name="life_bar_frame" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(8, 22)
texture = ExtResource("2_jfnjr")
offset = Vector2(72, 0)

[node name="xp_bar_in" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(8, 47)
scale = Vector2(0.5, 1)
texture = ExtResource("3_bjxuw")
offset = Vector2(72, 0)

[node name="xp_bar_frame" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(8, 47)
texture = ExtResource("3_dem6r")
offset = Vector2(72, 0)

[node name="lbl_health" type="Label" parent="CanvasLayer"]
visible = false
offset_left = 12.0
offset_top = 16.0
offset_right = 108.0
offset_bottom = 39.0
theme_override_fonts/font = ExtResource("1_07atg")
text = "HEALTH"

[node name="lbl_score" type="Label" parent="CanvasLayer"]
visible = false
offset_left = 521.0
offset_top = 8.0
offset_right = 633.0
offset_bottom = 31.0
theme_override_fonts/font = ExtResource("1_07atg")
text = "SCORE 0"

[node name="lbl_xp" type="Label" parent="CanvasLayer"]
visible = false
offset_left = 12.0
offset_top = 41.0
offset_right = 108.0
offset_bottom = 64.0
theme_override_fonts/font = ExtResource("1_07atg")
text = "Lvl 3"

[node name="Shaker" parent="." instance=ExtResource("1_mn4yh")]

[node name="TileMap" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAAAAcAAAADAAAAAAABAAcAAAADAAAAAAACAAcAAAADAAAAAAADAAcAAAADAAAAAAAEAAcAAAADAAAAAAAFAAcAAAADAAAAAAAGAAcAAAADAAAAAAAHAAcAAAADAAAAAAAIAAcAAAADAAAAAAAJAAcAAAADAAAAAAAKAAcAAAADAAAAAAALAAcAAAADAAAAAAAMAAcAAAADAAAAAAANAAcAAAADAAAAAAAOAAcAAAADAAAAAAAPAAcAAAADAAAAAAAQAAcAAAADAAAAAAARAAcAAAADAAAAAAASAAcAAAADAAAAAAATAAYAAAAMAAAAAAATAAUAAAAMAAAAAAATAAQAAAAMAAAAAAATAAMAAAACAAAAAAAVAAMAAAABAAAAAAAUAAMAAAADAAAAAAAVAAQAAAANAAAAAAAVAAUAAAANAAAAAAAVAAYAAAANAAAAAAAXAAcAAAADAAAAAAAYAAcAAAADAAAAAAAZAAcAAAADAAAAAAAaAAcAAAADAAAAAAAbAAcAAAADAAAAAAAWAAcAAAADAAAAAAAcAAcAAAADAAAAAAAdAAcAAAADAAAAAAAeAAYAAAACAAAAAAAfAAYAAAADAAAAAAAgAAYAAAADAAAAAAAhAAYAAAADAAAAAAAiAAYAAAADAAAAAAAjAAYAAAADAAAAAAAkAAYAAAADAAAAAAAlAAYAAAADAAAAAAAmAAYAAAADAAAAAAAnAAYAAAADAAAAAAAoAAYAAAADAAAAAAApAAYAAAADAAAAAAAqAAYAAAADAAAAAAArAAYAAAADAAAAAAAsAAYAAAADAAAAAAAtAAYAAAADAAAAAAAuAAYAAAADAAAAAAAvAAYAAAADAAAAAAAwAAYAAAADAAAAAAAxAAYAAAADAAAAAAAyAAYAAAADAAAAAAAzAAYAAAADAAAAAAA0AAYAAAADAAAAAAA1AAYAAAADAAAAAAA2AAYAAAADAAAAAAA3AAYAAAADAAAAAAA4AAYAAAADAAAAAAA5AAYAAAADAAAAAAA6AAYAAAADAAAAAAA7AAYAAAADAAAAAAA8AAYAAAADAAAAAAA9AAYAAAADAAAAAAA+AAYAAAADAAAAAAA/AAYAAAADAAAAAABAAAYAAAADAAAAAABBAAYAAAADAAAAAABCAAYAAAADAAAAAABDAAYAAAADAAAAAABEAAYAAAADAAAAAABFAAYAAAADAAAAAABGAAYAAAADAAAAAABHAAYAAAADAAAAAABIAAYAAAADAAAAAABJAAYAAAADAAAAAABKAAYAAAADAAAAAABLAAYAAAADAAAAAABMAAYAAAADAAAAAABNAAYAAAADAAAAAABOAAYAAAADAAAAAABPAAYAAAADAAAAAABQAAYAAAADAAAAAABRAAYAAAADAAAAAABSAAYAAAADAAAAAABTAAYAAAADAAAAAABUAAYAAAADAAAAAABVAAYAAAADAAAAAABWAAYAAAADAAAAAAD//wcAAAADAAAAAAD+/wcAAAADAAAAAAD9/wcAAAADAAAAAAD8/wcAAAADAAAAAAD7/wcAAAADAAAAAAD6/wcAAAADAAAAAAD5/wcAAAADAAAAAAD4/wcAAAADAAAAAAD3/wcAAAADAAAAAAD2/wcAAAADAAAAAAD1/wcAAAADAAAAAAD0/wcAAAADAAAAAADz/wcAAAADAAAAAADy/wcAAAADAAAAAADx/wcAAAADAAAAAADw/wcAAAADAAAAAADv/wcAAAADAAAAAADu/wcAAAADAAAAAADt/wcAAAADAAAAAADs/wcAAAADAAAAAADr/wcAAAADAAAAAADq/wcAAAADAAAAAADp/wcAAAADAAAAAADo/wcAAAADAAAAAADn/wcAAAADAAAAAADm/wcAAAADAAAAAADl/wcAAAADAAAAAADk/wcAAAADAAAAAADj/wcAAAADAAAAAAA=")
tile_set = SubResource("TileSet_gxlc0")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(280, -52)
position_smoothing_enabled = true
script = ExtResource("10_d3dg4")
player_path = NodePath("../Player")

[node name="ColorRect" type="ColorRect" parent="Camera2D"]
z_index = -4096
material = SubResource("ShaderMaterial_qk5nd")
offset_left = -988.0
offset_top = -581.0
offset_right = 597.0
offset_bottom = 534.0

[node name="ColorRect2" type="ColorRect" parent="Camera2D"]
z_index = -4096
material = SubResource("ShaderMaterial_257w8")
offset_left = -999.0
offset_top = -614.0
offset_right = 599.0
offset_bottom = 707.0

[node name="StaticBody2D" type="StaticBody2D" parent="Camera2D"]
position = Vector2(-658, -275)
collision_layer = 2
collision_mask = 2

[node name="collider" type="CollisionShape2D" parent="Camera2D/StaticBody2D"]
position = Vector2(32.5, 260.5)
shape = SubResource("RectangleShape2D_ethui")

[node name="StaticBody2D2" type="StaticBody2D" parent="Camera2D"]
position = Vector2(590, -275)
collision_layer = 2
collision_mask = 2

[node name="collider" type="CollisionShape2D" parent="Camera2D/StaticBody2D2"]
position = Vector2(32.5, 260.5)
shape = SubResource("RectangleShape2D_ethui")

[node name="Player" parent="." instance=ExtResource("1_0bmj5")]
position = Vector2(73, 194)
collision_layer = 3
collision_mask = 3

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2(199, 225)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
position = Vector2(-843, 130)
polygon = PackedVector2Array(259, 110, 72, 110, 67, 278, 440, 220)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_em42y")

[node name="XP_Item" parent="." instance=ExtResource("5_iwmxb")]
position = Vector2(374, 53)

[node name="XP_Item2" parent="." instance=ExtResource("5_iwmxb")]
position = Vector2(374, 53)

[node name="XP_Item3" parent="." instance=ExtResource("5_iwmxb")]
position = Vector2(374, 53)

[node name="XP_Item4" parent="." instance=ExtResource("5_iwmxb")]
position = Vector2(374, 53)

[node name="FX" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_p6773")
offset_left = -469.0
offset_top = -338.0
offset_right = 2475.0
offset_bottom = 935.0

[node name="SpawnerActivator" parent="." instance=ExtResource("14_5dohi")]
position = Vector2(455, 147)
scale = Vector2(1, 100)
